# Railway Fullstack Deployment

services:
  # Backend Service (Streamlit) - DEPLOY THIS FIRST
  - type: web
    name: sophi-backend
    env: docker
    dockerfilePath: ./Dockerfile.clean
    plan: free
    healthCheckPath: /_stcore/health
    envVars:
      - key: PORT
        value: 8501
      - key: PYTHON_VERSION
        value: 3.11
      # API Keys (set these in Railway dashboard)
      - key: OPENAI_API_KEY
        sync: false
      - key: GEMINI_API_KEY
        sync: false
      - key: ELEVENLABS_API_KEY
        sync: false
      - key: STABILITY_API_KEY
        sync: false
      - key: HUGGINGFACE_API_KEY
        sync: false
      - key: REPLICATE_API_KEY
        sync: false
      - key: RUNWAY_API_KEY
        sync: false

  # Frontend Service (Next.js) - SKIP FOR NOW
  # - type: web
  #   name: sophi-frontend
  #   env: docker
  #   dockerfilePath: ./Dockerfile.frontend
  #   plan: free
  #   healthCheckPath: /
  #   envVars:
  #     - key: NODE_ENV
  #       value: production
  #     - key: NEXT_PUBLIC_API_URL
  #       value: ${sophi-backend.url}
